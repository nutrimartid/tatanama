{% if login %}
    {% extends "base_login.html" %}
{% else %}
    {% extends "base.html" %}
{% endif %}
{% block content %}
    {% if msg %}
        <div class="alert alert-info" role="alert" style="margin:auto;max-width:600px">
            {{ msg }}
        </div>
    {% endif %}
    {% if data  %}
        <table class="SKU">
            <tr>
                <th> Nama Bundle </th>
                <th> SKU Bundle </th>
                <th> Price List NFI Bundle </th>
                <th> Harga Cost Bundle </th>
                <th> Harga Display Bundle </th>
            </tr>
            <tr>
                <td> {{data['Nama_Produk']}}</td>
                <td> {{data['SKU']}} </td>
                <td> Rp {{data['Price_List_NFI']}} </td>
                <td> Rp {{data['Harga_Cost']}} </td>
                <td> Rp {{data['Harga_Display']}} </td>
            </tr>
            {% if data['SKU']|string != data['New_SKU']|string %}
                <tr>
                    <td> SKU Sebenarnya </td>
                    <td> {{data['New_SKU']}}</td>
                </tr>
            {% endif %}
        </table>
        <br />
        <table class="SKU"
            <tr>
                <th>No</th>
                <th>Nama Produk</th>
                <th>SKU Produk</th>
                <th>PCS Produk</th>
                <th>Price List NFI Produk</th>
                <th>Subtotal Produk</th>
            </tr>
            {% for i in range(1,8) %}
                {% set colname = 'Produk_' + i|string %}
                {% if colname in data.keys() %}
                    <tr>
                        <td>{{i}}</td>
                        <td>{{data[colname]}}</td>
                        <td>{{data['SKU_' + colname]}}</td>
                        <td>{{data['PCS_' + colname]}}</td>
                        <td>Rp {{data['Price_List_NFI_' + i|string]}}</td>
                        <td>Rp {{data['Subtotal_' + colname]}}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </table>
        <br />
    {% endif %}
    <div class="container">
        <form class="form-group" method="post" action=""
                style="margin:auto;max-width:600px">
                <h3>Produk 1:</h3>
                {{ form.produk1(class_='form-control') }}
                {{ form.PCS1(class_='form-control') }}
                <h3>Produk 2:</h3>
                {{ form.produk2(class_='form-control') }}
                {{ form.PCS2(class_='form-control') }}
                <h3>Produk 3:</h3>
                {{ form.produk3(class_='form-control') }}
                {{ form.PCS3(class_='form-control') }}
                <h3>Produk 4:</h3>
                {{ form.produk4(class_='form-control') }}
                {{ form.PCS4(class_='form-control') }}
                <h3>Produk 5:</h3>
                {{ form.produk5(class_='form-control') }}
                {{ form.PCS5(class_='form-control') }}
                <h3>Produk 6:</h3>
                {{ form.produk6(class_='form-control') }}
                {{ form.PCS6(class_='form-control') }}
                <h3>Produk 7:</h3>
                {{ form.produk7(class_='form-control') }}
                {{ form.PCS7(class_='form-control') }}
                <button type="submit" class="btn btn-success" name="submit_button" value="submit">Submit</button>
        </form>
    </div>
    
    <script>
        $(function() {
            $.ajax({
                url: '{{ url_for("autocomplete") }}'
                }).done(function (data){
                    $('#produk1').autocomplete({
                        source: data,
                        minLength: 2
                    });
                    $('#produk2').autocomplete({
                        source: data,
                        minLength: 2
                    });
                    $('#produk3').autocomplete({
                        source: data,
                        minLength: 2
                    });
                    $('#produk4').autocomplete({
                        source: data,
                        minLength: 2
                    });
                    $('#produk5').autocomplete({
                        source: data,
                        minLength: 2
                    });
                    $('#produk6').autocomplete({
                        source: data,
                        minLength: 2
                    });
                    $('#produk7').autocomplete({
                        source: data,
                        minLength: 2
                    });
                });
            });
    </script>
{% endblock %}